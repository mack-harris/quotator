<?php


//Implements hook_block_info
function quotator_block_info() {
	$blocks['myquote'] = array(
		'info' => t('A Quote rotator.'),
		'cache' => DRUPAL_CACHE_PER_ROLE,
	);

	return $blocks;
}

//Implements hook_block_view
function quotator_block_view($delta) {
	$block = array();

	switch ($delta){
		case 'myquote':
			$quotation = variable_get('deep_thoughts');
			$author = variable_get('author');
			$block['subject'] = t('Quote of the Day');
			$block['content'] = t($quotation);
			break;
		default:
			break;
	}
	return $block;
}

/**function drupalmodule_block_configure($delta) {
$form = array;
switch ($delta) {
case 'Quotable':
$default_text = '';
$form['quotation1'] = array(
'#type' => 'textfield',
â€Ž '#title' => t('Quotation 1'),
'#description' => t('Enter the text of your first quote.'),
'#size' => 100,
'#maxlength' => 200,
'#default_value' => variable_get('mei_core_quotable-quote1', $default_text),
'#required' => TRUE,
);


default:
break;
}
return $form;
}*/


//Implements hook_block_configure
function quotator_block_configure($delta) {
	$form = array();
	switch($delta){
		case 'myquote':
			$form['quotable'] = array(
				'#type' => 'fieldset',
				'#title' => t('Quotable'),
				'#tree' => TRUE,
				'#collapsible' => FALSE,


				$form['quotable']['q'] = array(
					'#type' => 'textfield',
					'#title' => t('Quote'),
					'#description' => t('Enter your quote.'),
					'#size' => 100,
					'#maxlength' => 200,
					'#default_value' => variable_get($deep_thoughts, $default = NULL),
				),
				$form['quotable']['a'] = array(
					'#type' => 'textfield',
					'#title' => t('Attribution'),
					'#description' => t('Enter your attribution.'),
					'#size' => 100,
					'#maxlength' => 200,
					'#default_value' => variable_get($author, $default = NULL),
				),
				
			);
			break;
		default:
			break;
	}
	return $form;
}

//Implements hook_block_save()

function quotator_block_save($delta = 'myquote', $edit = array()) {
	if($delta == 'myquote'){
		if(isset($edit) ) {	
		//do some validation, set global variables in the db
			if(isset($edit['quotable']['q'])){
				variable_set($deep_thoughts, $edit['quotable']['q']);
			}
			if(isset($edit['quotable']['a'])){
				variable_set($author, $edit['quotable']['a']);
			}
		}
	}
}


//	variable_set('deep_thoughts', $edit['quotable']['q']);
//	variable_set('author', $edit['quotable']['a']);
//}





